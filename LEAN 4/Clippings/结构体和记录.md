---
title: "ç»“æ„ä½“å’Œè®°å½•"
source: "https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/#structures-and-records"
author:
published:
created: 2026-01-31
description:
tags:
  - "clippings"
---
## 9\. ç»“æ„ä½“å’Œè®°å½•ğŸ”—

æˆ‘ä»¬å·²ç»çœ‹åˆ° Lean çš„åŸºæœ¬ç³»ç»ŸåŒ…æ‹¬å½’çº³ç±»å‹ã€‚æ­¤å¤–ï¼Œæ˜¾ç„¶ä»…åŸºäºç±»å‹å®‡å®™ã€ä¾èµ–ç®­å¤´ç±»å‹å’Œå½’çº³ç±»å‹ï¼Œ å°±æœ‰å¯èƒ½æ„å»ºä¸€ä¸ªåšå®çš„æ•°å­¦å¤§å¦ï¼›å…¶ä»–çš„ä¸€åˆ‡éƒ½æ˜¯ç”±æ­¤è€Œæ¥ã€‚Lean æ ‡å‡†åº“åŒ…å«è®¸å¤šå½’çº³ç±»å‹çš„å®ä¾‹ ï¼ˆä¾‹å¦‚ï¼Œ `[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")` ï¼Œ `[Prod](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Tuples/#Prod___mk "Documentation for Prod in Lean Language Reference")` ï¼Œ `[List](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___nil "Documentation for List in Lean Language Reference")` ï¼‰ï¼Œç”šè‡³é€»è¾‘è¿æ¥è¯ä¹Ÿæ˜¯ä½¿ç”¨å½’çº³ç±»å‹å®šä¹‰çš„ã€‚

å›å¿†ä¸€ä¸‹ï¼ŒåªåŒ…å«ä¸€ä¸ªæ„é€ å­çš„éé€’å½’å½’çº³ç±»å‹è¢«ç§°ä¸º **ç»“æ„ä½“ï¼ˆstructureï¼‰** æˆ– **è®°å½•ï¼ˆrecordï¼‰** ã€‚ ä¹˜ç§¯ç±»å‹æ˜¯ä¸€ç§ç»“æ„ä½“ï¼Œä¾å€¼ä¹˜ç§¯ï¼ˆSigmaï¼‰ç±»å‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¯å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ `S` æ—¶ï¼Œ æˆ‘ä»¬é€šå¸¸å®šä¹‰ **æŠ•å½±ï¼ˆprojectionï¼‰** å‡½æ•°æ¥â€œææ„â€ï¼ˆdestructï¼‰ `S` çš„æ¯ä¸ªå®ä¾‹å¹¶æ£€ç´¢å­˜å‚¨åœ¨å…¶å­—æ®µä¸­çš„å€¼ã€‚ `[Prod.fst](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Tuples/#Prod___mk "Documentation for Prod.fst in Lean Language Reference")` å’Œ `[Prod.snd](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Tuples/#Prod___mk "Documentation for Prod.snd in Lean Language Reference")` ï¼Œåˆ†åˆ«è¿”å›ä¹˜ç§¯å¯¹ä¸­çš„ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå…ƒç´ çš„å‡½æ•°ï¼Œå°±æ˜¯è¿™ç§æŠ•å½±çš„ä¾‹å­ã€‚

åœ¨ç¼–å†™ç¨‹åºæˆ–å½¢å¼åŒ–æ•°å­¦æ—¶ï¼Œå®šä¹‰åŒ…å«è®¸å¤šå­—æ®µçš„ç»“æ„ä½“æ˜¯å¾ˆå¸¸è§çš„ã€‚Lean ä¸­å¯ç”¨ `structure` å‘½ä»¤å®ç°æ­¤è¿‡ç¨‹ã€‚ å½“æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å®šä¹‰ä¸€ä¸ªç»“æ„ä½“æ—¶ï¼ŒLean ä¼šè‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰çš„æŠ•å½±å‡½æ•°ã€‚ `structure` å‘½ä»¤è¿˜å…è®¸æˆ‘ä»¬æ ¹æ®ä»¥å‰å®šä¹‰çš„ç»“æ„ä½“å®šä¹‰æ–°çš„ç»“æ„ä½“ã€‚ æ­¤å¤–ï¼ŒLean ä¸ºå®šä¹‰ç»™å®šç»“æ„ä½“çš„å®ä¾‹æä¾›äº†æ–¹ä¾¿çš„ç¬¦å·ã€‚

## 9.1. å£°æ˜ç»“æ„ä½“ğŸ”—

ç»“æ„ä½“å‘½ä»¤æœ¬è´¨ä¸Šæ˜¯å®šä¹‰å½’çº³æ•°æ®ç±»å‹çš„â€œå‰ç«¯â€ã€‚æ¯ä¸ª `structure` å£°æ˜éƒ½ä¼šå¼•å…¥ä¸€ä¸ªåŒåçš„å‘½åç©ºé—´ã€‚ä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼š

```
structure <name> <parameters> <parent-structures> where
      <constructor> :: <fields>
```

å¤§å¤šæ•°éƒ¨åˆ†ä¸æ˜¯å¿…è¦çš„ã€‚ä¾‹å­ï¼š

`structurePoint(Î±:Typeu)wheremk::x:Î±y:Î±`

ç±»å‹ `Point` çš„å€¼æ˜¯ä½¿ç”¨ `[Point.mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")ab` åˆ›å»ºçš„ï¼Œå¹¶ä¸”ç‚¹ `p` çš„å­—æ®µå¯ä»¥ä½¿ç”¨ `Point.xp` å’Œ `Point.yp` ï¼ˆä½† `p.x` å’Œ `p.y` ä¹Ÿå¯ä»¥ï¼Œè§ä¸‹æ–‡ï¼‰ã€‚ç»“æ„ä½“å‘½ä»¤è¿˜ç”Ÿæˆæœ‰ç”¨çš„é€’å½’å™¨å’Œå®šç†ã€‚ä¸‹é¢æ˜¯ä¸ºä¸Šè¿°å£°æ˜ç”Ÿæˆçš„ä¸€äº›ç»“æ„ä½“æ–¹æ³•ã€‚

``-- a Type `Point.{u}(Î±:Type u):Type u`[#check](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___check "Documentation for syntax in Lean Language Reference")Point``
```
Point.{u} (Î± : Type u) : Type u
```
``-- the eliminator æ¶ˆå»å™¨ `@Point.rec : {Î±:Type u_2}â†’{motive:PointÎ±â†’Sort u_1}â†’((xy:Î±)â†’motive[{](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")x[:=](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")x[,](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")y[:=](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")y[}](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example"))â†’(t:PointÎ±)â†’motivet`[#check](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___check "Documentation for syntax in Lean Language Reference")@Point.rec``
```
@Point.rec : {Î± : Type u_2} â†’
  {motive : Point Î± â†’ Sort u_1} â†’ ((x y : Î±) â†’ motive { x := x, y := y }) â†’ (t : Point Î±) â†’ motive t
```
``-- the constructor æ„é€ å™¨ `[@](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")[Point.mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example") : {Î±:Type u_1}â†’Î±â†’Î±â†’PointÎ±`[#check](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___check "Documentation for syntax in Lean Language Reference")@[Point.mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")``
```
@Point.mk : {Î± : Type u_1} â†’ Î± â†’ Î± â†’ Point Î±
```
``-- a projection æŠ•å½± `@Point.x : {Î±:Type u_1}â†’PointÎ±â†’Î±`[#check](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___check "Documentation for syntax in Lean Language Reference")@Point.x``
```
@Point.x : {Î± : Type u_1} â†’ Point Î± â†’ Î±
```
``-- a projection æŠ•å½± `@Point.y : {Î±:Type u_1}â†’PointÎ±â†’Î±`[#check](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___check "Documentation for syntax in Lean Language Reference")@Point.y``
```
@Point.y : {Î± : Type u_1} â†’ Point Î± â†’ Î±
```

å¦‚æœæ²¡æœ‰æä¾›æ„é€ å­åç§°ï¼Œåˆ™é»˜è®¤çš„æ„é€ å‡½æ•°åä¸º `mk` ã€‚

ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨ç”Ÿæˆçš„ç»“æ„çš„ç®€å•å®šç†å’Œè¡¨è¾¾å¼ã€‚åƒå¾€å¸¸ä¸€æ ·ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨å‘½ä»¤ `[open](https://lean-lang.org/doc/reference/4.26.0/Namespaces-and-Sections/#Lean___Parser___Command___open "Documentation for syntax in Lean Language Reference")Point` æ¥é¿å…å‰ç¼€ `Point` ã€‚

`` `10`[#eval](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___eval "Documentation for syntax in Lean Language Reference")Point.x([Point.mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")1020) ``
```
10
```
`` `20`[#eval](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___eval "Documentation for syntax in Lean Language Reference")Point.y([Point.mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")1020) ``
```
20
```
`[open](https://lean-lang.org/doc/reference/4.26.0/Namespaces-and-Sections/#Lean___Parser___Command___open "Documentation for syntax in Lean Language Reference")Point` `example(ab:Î±):x([mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")ab)=a:=[rfl](https://lean-lang.org/doc/reference/4.26.0/Basic-Propositions/Propositional-Equality/#rfl-next "Documentation for rfl in Lean Language Reference")` `example(ab:Î±):y([mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")ab)=b:=rfl`

ç»™å®š `p : Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")` ï¼Œç¬¦å· `p.x` æ˜¯ `Point.xp` çš„ç¼©å†™ã€‚è¿™æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥è®¿é—®ç»“æ„ä½“çš„å­—æ®µã€‚

`defp:=[Point.mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")1020` `` `p.x : [Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")`[#check](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___check "Documentation for syntax in Lean Language Reference")p.x ``
```
p.x : Nat
```
`` `10`[#eval](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___eval "Documentation for syntax in Lean Language Reference")p.x ``
```
10
```
`` `20`[#eval](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___eval "Documentation for syntax in Lean Language Reference")p.y ``
```
20
```

ç‚¹è®°å·ä¸ä»…æ–¹ä¾¿äºè®¿é—®è®°å½•çš„æŠ•å½±ï¼Œè€Œä¸”ä¹Ÿæ–¹ä¾¿äºåº”ç”¨åŒåå‘½åç©ºé—´ä¸­å®šä¹‰çš„å‡½æ•°ã€‚å›æƒ³ä¸€ä¸‹ [åˆå–](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/PropositionsAndProofs/#conjunction) ä¸€èŠ‚ï¼Œå¦‚æœ `p` å…·æœ‰ `Point` ç±»å‹ï¼Œé‚£ä¹ˆè¡¨è¾¾å¼ `p.foo` è¢«è§£é‡Šä¸º `Point.foo p` ï¼Œå‡è®¾ `foo` çš„ç¬¬ä¸€ä¸ªééšå¼å‚æ•°å…·æœ‰ç±»å‹ `Point` ã€‚ å› æ­¤ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œè¡¨è¾¾å¼ `p.[add](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next "Definition of example")q` æ˜¯ `Point.add p q` çš„ç¼©å†™ã€‚

`structurePoint(Î±:Typeu)wherex:Î±y:Î±deriving[Repr](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Repr___mk "Documentation for Repr in Lean Language Reference")` `defPoint.add(pq:Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")):=[mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")(p.x+q.x)(p.y+q.y)` `defp:Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):=[Point.mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")12` `defq:Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):=[Point.mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")34` `` `{ x := 4, y := 6 }`[#eval](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___eval "Documentation for syntax in Lean Language Reference")p.[add](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next "Definition of example")q ``
```
{ x := 4, y := 6 }
```

åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•å®šä¹‰ä¸€ä¸ªåƒ `[add](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next "Definition of example")` è¿™æ ·çš„å‡½æ•°ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥é€šç”¨åœ°ä¸º `PointÎ±` çš„å…ƒç´ å·¥ä½œï¼Œ è€Œä¸ä»…ä»…æ˜¯ `Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")` ï¼Œåªè¦å‡è®¾ `Î±` æœ‰ä¸€ä¸ªå…³è”çš„åŠ æ³•æ“ä½œã€‚

æ›´ä¸€èˆ¬åœ°ï¼Œç»™å®šä¸€ä¸ªè¡¨è¾¾å¼ `p.foo x y z` å…¶ä¸­ `p : Point` ï¼ŒLean ä¼šæŠŠ `p` ä»¥ `Point` ä¸ºç±»å‹æ’å…¥åˆ° `Point.foo` çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯æ ‡é‡ä¹˜æ³•çš„å®šä¹‰ï¼Œ `p.[smul](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point___smul "Definition of example")3` è¢«è§£é‡Šä¸º `[Point.smul](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point___smul "Definition of example")3p` ã€‚

`defPoint.smul(n:[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"))(p:Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")):=[Point.mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")(n*p.x)(n*p.y)` `defp:Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):=[Point.mk](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")12` `` `{ x := 3, y := 6 }`[#eval](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___eval "Documentation for syntax in Lean Language Reference")p.[smul](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point___smul "Definition of example")3 ``
```
{ x := 3, y := 6 }
```
`example{p:Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")}:p.[smul](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point___smul "Definition of example")3=[Point.smul](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point___smul "Definition of example")3p:=rfl`

å¯¹ `[List.map](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___map "Documentation for List.map in Lean Language Reference")` å‡½æ•°ä½¿ç”¨ç±»ä¼¼çš„æŠ€å·§å¾ˆå¸¸ç”¨ã€‚å®ƒæ¥å—ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºå®ƒçš„ç¬¬äºŒä¸ªééšå¼å‚æ•°ï¼š

`` `[@](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___map "Documentation for List.map in Lean Language Reference")[List.map](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___map "Documentation for List.map in Lean Language Reference") : {Î±:Type u_1}â†’{Î²:Type u_2}â†’(Î±â†’Î²)â†’[List](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___nil "Documentation for List in Lean Language Reference")Î±â†’[List](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___nil "Documentation for List in Lean Language Reference")Î²`[#check](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___check "Documentation for syntax in Lean Language Reference")@[List.map](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___map "Documentation for List.map in Lean Language Reference") ``
```
@List.map : {Î± : Type u_1} â†’ {Î² : Type u_2} â†’ (Î± â†’ Î²) â†’ List Î± â†’ List Î²
```
`defxs:[List](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___nil "Documentation for List in Lean Language Reference")[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):=[1,2,3]` `deff:[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")â†’[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):=funx=>x*x` `` `[1, 4, 9]`[#eval](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___eval "Documentation for syntax in Lean Language Reference")[xs](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#xs "Definition of example").[map](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___map "Documentation for List.map in Lean Language Reference")f ``
```
[1, 4, 9]
```
`example{xs:[List](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___nil "Documentation for List in Lean Language Reference")Î±}{f:Î±â†’Î²}:xs.[map](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___map "Documentation for List.map in Lean Language Reference")f=[List.map](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___map "Documentation for List.map in Lean Language Reference")fxs:=rfl`

æ­¤å¤„ `[xs](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#xs "Definition of example").[map](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___map "Documentation for List.map in Lean Language Reference")f` è¢«è§£é‡Šä¸º `[List.map](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Linked-Lists/#List___map "Documentation for List.map in Lean Language Reference")fxs` ã€‚

## 9.2. å¯¹è±¡ğŸ”—

æˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨æ„é€ å­åˆ›å»ºç»“æ„ä½“ç±»å‹çš„å…ƒç´ ã€‚å¯¹äºåŒ…å«è®¸å¤šå­—æ®µçš„ç»“æ„ï¼Œè¿™é€šå¸¸æ˜¯ä¸æ–¹ä¾¿çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»è®°ä½å­—æ®µå®šä¹‰çš„é¡ºåºã€‚ å› æ­¤ï¼ŒLean ä¸ºå®šä¹‰ç»“æ„ä½“ç±»å‹çš„å…ƒç´ æä¾›äº†ä»¥ä¸‹æ›¿ä»£ç¬¦å·ã€‚

```
{ (<field-name> := <expr>)* : structure-type }
    or
    { (<field-name> := <expr>)* }
```

åªè¦å¯ä»¥ä»æœŸæœ›çš„ç±»å‹æ¨æ–­å‡ºç»“æ„ä½“çš„åç§°ï¼Œåç¼€ `: structure-type` å°±å¯ä»¥çœç•¥ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ç§è¡¨ç¤ºæ³•æ¥å®šä¹‰â€œPointâ€ã€‚ å­—æ®µçš„æŒ‡å®šé¡ºåºæ— å…³ç´§è¦ï¼Œå› æ­¤ä¸‹é¢çš„æ‰€æœ‰è¡¨è¾¾å¼å®šä¹‰ç›¸åŒçš„ Pointã€‚

`structurePoint(Î±:Typeu)wherex:Î±y:Î±` `` `[{](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")x[:=](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")10[,](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")y[:=](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")20[}](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example") : Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")`[#check](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___check "Documentation for syntax in Lean Language Reference"){x:=10,y:=20:Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")} ``
```
{ x := 10, y := 20 } : Point Nat
```
`` `[{](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")x[:=](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")10[,](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")y[:=](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")20[}](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example") : Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")`[#check](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___check "Documentation for syntax in Lean Language Reference"){y:=20,x:=10:Point_} ``
```
{ x := 10, y := 20 } : Point Nat
```
`` `[{](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")x[:=](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")10[,](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")y[:=](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example")20[}](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point "Definition of example") : Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")`[#check](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___check "Documentation for syntax in Lean Language Reference")({x:=10,y:=20}:Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")) ``
```
{ x := 10, y := 20 } : Point Nat
```
`example:Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):={y:=20,x:=10}`

å¯ä»¥ä½¿ç”¨èŠ±æ‹¬å·å°†å­—æ®µæ ‡è®°ä¸ºéšå¼ã€‚éšå¼å­—æ®µå°†æˆä¸ºæ„é€ å­çš„éšå¼å‚æ•°ã€‚

å¦‚æœä¸€ä¸ªå­—æ®µçš„å€¼æ²¡æœ‰æŒ‡å®šï¼ŒLean ä¼šå°è¯•æ¨æ–­å®ƒã€‚å¦‚æœä¸èƒ½æ¨æ–­å‡ºæœªæŒ‡å®šçš„å­—æ®µï¼ŒLean ä¼šæ ‡è®°ä¸€ä¸ªé”™è¯¯ï¼Œè¡¨æ˜ç›¸åº”çš„å ä½ç¬¦æ— æ³•åˆæˆã€‚

`structureMyStructwhere{Î±:Typeu}{Î²:Typev}a:Î±b:Î²` `` `{[Î±](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#MyStruct "Definition of example"):=[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"),[Î²](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#MyStruct "Definition of example"):=[Bool](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Booleans/#Bool___false "Documentation for Bool in Lean Language Reference"),[a](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#MyStruct "Definition of example"):=10,[b](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#MyStruct "Definition of example"):=[true](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Booleans/#Bool___false "Documentation for Bool.true in Lean Language Reference")} : [MyStruct](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#MyStruct "Definition of example")`[#check](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___check "Documentation for syntax in Lean Language Reference"){[a](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#MyStruct "Definition of example"):=10,[b](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#MyStruct "Definition of example"):=[true](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Booleans/#Bool___false "Documentation for Bool.true in Lean Language Reference"):[MyStruct](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#MyStruct "Definition of example")} ``
```
{ Î± := Nat, Î² := Bool, a := 10, b := true } : MyStruct
```

**è®°å½•æ›´æ–°ï¼ˆRecord updateï¼‰** æ˜¯å¦ä¸€ä¸ªå¸¸è§çš„æ“ä½œï¼Œç›¸å½“äºé€šè¿‡ä¿®æ”¹æ—§è®°å½•ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µçš„å€¼æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„è®°å½•å¯¹è±¡ã€‚ é€šè¿‡åœ¨å­—æ®µèµ‹å€¼ä¹‹å‰æ·»åŠ æ³¨é‡Š `s ` `with` ï¼ŒLean å…è®¸æ‚¨æŒ‡å®šè®°å½•è§„èŒƒä¸­æœªèµ‹å€¼çš„å­—æ®µï¼Œè¯¥å­—æ®µåº”ä»ä¹‹å‰å®šä¹‰çš„ç»“æ„å¯¹è±¡ `s` ä¸­è·å–ã€‚ å¦‚æœæä¾›äº†å¤šä¸ªè®°å½•å¯¹è±¡ï¼Œé‚£ä¹ˆå°†æŒ‰é¡ºåºè®¿é—®å®ƒä»¬ï¼Œç›´åˆ° Lean æ‰¾åˆ°ä¸€ä¸ªåŒ…å«æœªæŒ‡å®šå­—æ®µçš„è®°å½•å¯¹è±¡ã€‚ å¦‚æœåœ¨è®¿é—®äº†æ‰€æœ‰å¯¹è±¡ä¹‹åä»æœªæŒ‡å®šä»»ä½•å­—æ®µåï¼ŒLean å°†å¼•å‘é”™è¯¯ã€‚

`structurePoint(Î±:Typeu)wherex:Î±y:Î±deriving[Repr](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Repr___mk "Documentation for Repr in Lean Language Reference")` `defp:Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):={x:=1,y:=2}` `` `{ x := 1, y := 3 }`[#eval](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___eval "Documentation for syntax in Lean Language Reference"){pwithy:=3} ``
```
{ x := 1, y := 3 }
```
`` `{ x := 4, y := 2 }`[#eval](https://lean-lang.org/doc/reference/4.26.0/Interacting-with-Lean/#Lean___Parser___Command___eval "Documentation for syntax in Lean Language Reference"){pwithx:=4} ``
```
{ x := 4, y := 2 }
```
`structure(Î±:Typeu)where:Î±:Î±:Î±` `defq:[Point3](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next "Definition of example")[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):={[x](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next "Definition of example"):=5,[y](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next "Definition of example"):=5,[z](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next "Definition of example"):=5}` `def:[Point3](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next "Definition of example")[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):={p,qwith[x](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next "Definition of example"):=6}` `example:[r](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next "Definition of example").[x](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next "Definition of example")=6:=[rfl](https://lean-lang.org/doc/reference/4.26.0/Basic-Propositions/Propositional-Equality/#rfl-next "Documentation for rfl in Lean Language Reference")` `example:[r](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next "Definition of example").[y](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next "Definition of example")=2:=[rfl](https://lean-lang.org/doc/reference/4.26.0/Basic-Propositions/Propositional-Equality/#rfl-next "Documentation for rfl in Lean Language Reference")` `example:[r](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next "Definition of example").[z](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next "Definition of example")=5:=rfl`

## 9.3. ç»§æ‰¿ğŸ”—

æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ æ–°çš„å­—æ®µæ¥ **æ‰©å±•** ç°æœ‰çš„ç»“æ„ä½“ã€‚è¿™ä¸ªç‰¹æ€§å…è®¸æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ç§å½¢å¼çš„ **ç»§æ‰¿** ã€‚

`structurePoint(Î±:Typeu)wherex:Î±y:Î±` `inductiveColorwhere|red|green|blue` `structure(Î±:Typeu)extendsPointÎ±where:Color`

åœ¨ä¸‹ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å¤šé‡ç»§æ‰¿å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œç„¶åä½¿ç”¨çˆ¶ç»“æ„çš„å¯¹è±¡å®šä¹‰ä¸€ä¸ªå¯¹è±¡ã€‚

`structurePoint(Î±:Typeu)wherex:Î±y:Î±:Î±` `structurewhere:[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference")` `structure(Î±:Typeu)extendsPointÎ±,[RGBValue](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next-next-next "Definition of example")where:blue=0` `defp:Point[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):={x:=10,y:=10,[z](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next-next-next "Definition of example"):=20}` `def:[RedGreenPoint](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next-next-next "Definition of example")[Nat](https://lean-lang.org/doc/reference/4.26.0/Basic-Types/Natural-Numbers/#Nat___zero "Documentation for Nat in Lean Language Reference"):={pwith[red](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next-next-next "Definition of example"):=200,[green](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next-next-next "Definition of example"):=40,[blue](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next-next-next "Definition of example"):=0,[no_blue](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next-next-next "Definition of example"):=[rfl](https://lean-lang.org/doc/reference/4.26.0/Basic-Propositions/Propositional-Equality/#rfl-next "Documentation for rfl in Lean Language Reference")}` `example:[rgp](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next-next-next "Definition of example").x=10:=[rfl](https://lean-lang.org/doc/reference/4.26.0/Basic-Propositions/Propositional-Equality/#rfl-next "Documentation for rfl in Lean Language Reference")` `example:[rgp](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next-next-next "Definition of example").[red](https://www.leanprover.cn/tp-lean-zh/StructuresAndRecords/StructuresAndRecords/#Point-next-next-next-next-next "Definition of example")=200:=rfl`